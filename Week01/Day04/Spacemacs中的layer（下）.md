# spacemacs ä¸­çš„ layerï¼ˆä¸‹ï¼‰

æœ¬èŠ‚å°†ä»‹ç»ä¸€äº›ä½¿ç”¨é »ç‡è¾ƒé«˜çš„ layer çš„æ›´å¤šé…ç½®

> æœ¬ç‰ˆå—å°†ä¼šé•¿æœŸæ›´æ–°

## treemacs

### åŸºæœ¬æ“ä½œ

> ä»¥ä¸‹æ“ä½œè¯·åœ¨ treemacs ç¼“å†²åŒºå†…å®Œæˆï¼Œå¯ä»¥æŒ‰`SPC 0`æ¥åˆ‡æ¢åˆ° treemac ç¼“å†²åŒº


åœ¨ treemacs ä¸­å¯ä»¥ä½¿ç”¨`C-n`å’Œ`C-p`æ¥ä¸Šä¸‹ç§»åŠ¨é€‰ä¸­æ–‡ä»¶ï¼ŒæŒ‰å›è½¦é”®å³å¯æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶

| æŒ‰é”® | å¯¹åº”çš„æ“ä½œ              |
| :--: | :---------------------: |
| cf   | æ–°å»ºæ–‡ä»¶                |
| cd   | æ–°å»ºç›®å½•                |
| R    | é‡å‘½å                  |
| q    | éšè—/æ˜¾ç¤º treemacs ç›®å½• |
| Q    | é€€å‡º treemasc           |
| ov   | å‚ç›´åˆ†å±æ¥æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶  |
| oh   | æ°´å¹³åˆ†å±æ¥æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶  |
| th   | éšè—æˆ–æ˜¾ç¤ºéšè—çš„æ–‡ä»¶    |
| m    | ç§»åŠ¨ä¸€ä¸ªæ–‡ä»¶                  |

å¦å¤–ï¼Œ`SPC f t`å¯ä»¥å¿«é€Ÿæ‰“å¼€ treemacs

treemacs æä¾›äº†ä¸€ä¸ªç®€å•è€Œå¼ºå¤§çš„æ–‡ä»¶å¯¼èˆªç›®å½•ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œå®ƒä¼šè‡ªåŠ¨æ ¹æ®å½“å‰çš„æ–‡ä»¶æ¥å†³å®šåº”è¯¥æ˜¾ç¤ºå“ªä¸ª
ç›®å½•ï¼Œä½†å¤§å¤šæ•°æ—¶å€™ï¼Œtreemacs å¹¶ä¸ä¼šè¿™ä¹ˆåšï¼Œå› æ­¤ä½ éœ€è¦æ‰‹åŠ¨åˆ‡æ¢ç›®å½•ã€‚

| æŒ‰é”® | å¯¹åº”çš„æ“ä½œ           |
| :--: | :------------------: |
| M-H  | å¯¼èˆªåˆ°ä¸Šä¸€çº§ç›®å½•     |
| M-L  | å¯¼èˆªåˆ°ä¸‹ä¸€çº§ç›®å½•     |

> æ³¨æ„ï¼ŒH å’Œ L æ˜¯å¤§å†™çš„ï¼Œå› æ­¤ä½ è¿˜éœ€è¦åŒæ—¶æŒ‰ä¸‹ Shiftï¼

æˆ–è€…ï¼Œä½ å¯ä»¥ä½¿ç”¨`M-x treemacs-root-up`å’Œ`M-x treemacs-root-down`æ¥ç§»åŠ¨ç›®å½•

### è‡ªåŠ¨åˆ·æ–°

åœ¨ä½ åˆ é™¤æˆ–è€…æ–°å»ºä¸€äº›æ–‡ä»¶ä¹‹åï¼Œtreemacs ä¸ä¼šç«‹å³åˆ·æ–°å½“å‰çš„ç›®å½•è¯•å›¾ï¼Œä½ éœ€è¦æ‰‹åŠ¨åˆ·æ–°ã€‚å¦‚æœå¸Œæœ›è‡ªåŠ¨
åˆ·æ–°çš„è¯ï¼Œè¯·æ›´æ”¹ dotspacemacs-configuration-layers ä¸­çš„ treemacs
```lisp
(treemacs :variables treemacs-use-filewatch-mode t)
```

### ä¸»é¢˜

ä½ å¯ä»¥ä½¿ç”¨ all-the-icons ä¸»é¢˜æ¥æ˜¾ç¤º treemacs ä¸Šçš„å›¾æ ‡ï¼Œé…ç½®æ–¹å¼åŒä¸Š

```lisp
(treemacs :variables treemacs-use-all-the-icons-theme t)
```

å¦‚æœä½ åŒæ—¶ä¿®æ”¹äº†â€œè‡ªåŠ¨åˆ·æ–°â€å’Œâ€œä¸»é¢˜â€ä¸¤ä¸ªé…ç½®ï¼Œä¿®æ”¹åçš„ä»£ç åº”è¯¥ç±»ä¼¼äºï¼š
```lisp
(treemacs :variables treemacs-use-filewatch-mode t
                     treemacs-use-all-the-icons-theme t)
```

## lsp

### å®‰è£…è¯­è¨€æœåŠ¡å™¨

åœ¨æ‰“å¼€ç›¸åº”çš„ç¨‹åºæ–‡ä»¶åï¼Œä½ å¯ä»¥é€šè¿‡è¾“å…¥`M-x lsp`æ‰‹åŠ¨æ¥å®‰è£…å¯¹åº”çš„è¯­è¨€æœåŠ¡å™¨ï¼Œè¿™ç§æ–¹æ³•é€‚ç”¨äºæ— æ³•è‡ªåŠ¨
å®‰è£…è¯­è¨€æœåŠ¡å™¨çš„æƒ…å†µ

### header line çš„æ˜¾ç¤ºå’Œéšè—

å¯ç”¨ lsp å¹¶å®‰è£…å¯¹åº”è¯­è¨€çš„æ”¯æŒä¹‹åï¼Œé€šå¸¸ä¼šåœ¨ç›¸å…³çš„ä»£ç æ–‡ä»¶ä¸Šæ˜¾ç¤ºæ˜¾ç¤ºå½“å‰æ–‡ä»¶çš„è·¯å¾„å’Œå›¾æ ‡ï¼Œå¦‚æœä½ æƒ³è¦
éšè—çš„è¯ï¼Œå¯ä»¥åœ¨ user-config ä¸­æ·»åŠ `lsp-headerline-breadcrumb-enable nil`ï¼Œä½ ä¹Ÿ
å¯ä»¥é€šè¿‡`lsp-headerline-breadcrumb-segments`æ¥è¿›è¡Œæ›´ç»†å¾®çš„è°ƒæ•´

- `project`æ˜¾ç¤ºå½“å‰é¡¹ç›®çš„åç§°
- `file`æ˜¾ç¤ºå½“å‰æ–‡ä»¶çš„åç§°
- `path-up-to-project`æ˜¾ç¤ºå½“å‰é¡¹ç›®çš„è·¯å¾„
- `symbols`æ˜¾ç¤ºå›¾ç‰‡

å¯ä»¥ä¿®æ”¹ä¸ºä¸‹é¢è¿™æ ·
```lisp
(setq-default dotspacemacs-configuration-layers
              '((lsp :variables lsp-headerline-breadcrumb-segments '(symbols))))
              ;; åªæ˜¾ç¤ºå›¾æ ‡
              ;; è¿™åªæ˜¯ç”¨äºåœ¨æ–‡æ¡£ä¸­è¯´æ˜çš„ä»£ç é…ç½®ç¤ºä¾‹ï¼Œå¦‚æœä½ éœ€è¦ä¿®æ”¹ç›¸å…³çš„è®¾ç½®ï¼Œä½ åº”è¯¥åœ¨
              ;; .spacemacs ä¸­çš„ dotspacemacs-configuration-layers åˆ—è¡¨é‡Œ
              ;; æŠŠ lsp æ”¹ä¸º (lsp :variables lsp-headerline-breadcrumb-segments '(symbols))
              ;; ä¸”ä»Šåå…³äºåœ¨ layer åˆ—è¡¨ä¸­çš„é…ç½®é€‰é¡¹ï¼Œéƒ½ä¼šä»¥è¿™ç§æ–¹å¼å‘ˆç°
```
æˆ–è€…
```lisp
(setq-default dotspacemacs-configuration-layers
              '((lsp :variables lsp-headerline-breadcrumb-segments '(project file))))
              ;; æ˜¾ç¤ºé¡¹ç›®åç§°å’Œæ–‡ä»¶åç§°
```

### ä»£ç é”™è¯¯ç»Ÿè®¡

é»˜è®¤æƒ…å†µä¸‹ï¼Œlsp ä¼šç»Ÿè®¡å½“å‰é¡¹ç›®ä¸‹æ‰€æœ‰çš„é”™è¯¯ï¼Œå¦‚æœè¦ç¦ç”¨ï¼Œåº”è¯¥ä¿®æ”¹`lsp-modeline-code-actions-enable`

```lisp
(setq-default dotspacemacs-configuration-layers
              '((lsp :variables lsp-modeline-code-actions-enable nil)))
```

æ­¤å¤–ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨`lsp-modeline-code-actions-segments`è¿›è¡Œæ›´ç»†å¾®çš„ä¿®æ”¹
- `icon`æ˜¾ç¤ºç›¸åº”çš„é”™è¯¯çš„å›¾æ ‡ï¼Œå¦‚ä»£ç é”™è¯¯æ˜¾ç¤ºä¸ºğŸ”´ï¼Œè€Œè­¦å‘Šåˆ™æ˜¾ç¤ºä¸ºæ©™è‰²åœ†ç‚¹
- `name`æ˜¾ç¤ºå‡ºç°é”™è¯¯çš„ä»£ç çš„åç§°
- `count`æ˜¾ç¤ºå‡ºç°é”™è¯¯çš„ä»£ç çš„æ•°é‡

```lisp
(setq-default dotspacemacs-configuration-layers
              '((lsp :variables
                     ;; default segments
                     lsp-modeline-code-actions-segments '(count icon))))
```

## syntax-checking

syntax-checking ä½¿ç”¨ flycheck ä½œä¸ºè¯­æ³•æ£€æŸ¥å·¥å…·ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œflycheck ä¼šåœ¨ä¸€äº›å…·æœ‰æ£€æŸ¥æ„ä¹‰çš„
åœ°æ–¹æä¾›è¯­æ³•æ£€æŸ¥ï¼Œå¦‚å„ç§å„æ ·çš„æºä»£ç æ–‡ä»¶ javascrptã€javaã€c/c++ ç­‰ï¼Œå¦‚æœä½ å¸Œæœ›å®ƒåœ¨ lisp ç­‰æºä»£ç 
æ–‡ä»¶ä¸Šä¹Ÿæä¾›è¯­æ³•æ£€æŸ¥çš„è¯ï¼Œå¯ä»¥åœ¨ user-config ä¸­æ·»åŠ ï¼š
```lisp
(global-flycheck-mode 1)
```
